import{a as E}from"./chunk-LP2IO24O.js";import{Ab as A,Bb as y,Ea as V,Eb as $,Fa as m,Fb as I,Ga as p,Ha as P,I as F,Ia as k,Ib as G,O as C,Ob as M,P as j,Rb as q,Sb as D,T as b,Tb as R,U as v,Ub as L,Vb as Z,Wb as z,Xb as H,Ya as S,Yb as J,Zb as K,_b as B,ca as i,cb as N,cc as Q,da as c,dc as U,ec as W,fc as X,jc as Y,ka as g,lc as ee,ma as d,nc as te,qa as o,ra as a,sa as _,wa as h,xa as u,ya as s,za as x}from"./chunk-25PIQWJN.js";import"./chunk-P2VZOJAX.js";var w=function(t){return t.FixedMonthly="FixedMonthly",t.PercentageOfSales="PercentageOfSales",t}(w||{});function pe(t,f){if(t&1&&(o(0,"small",11),m(1),a()),t&2){let e=s();i(),P(" ",e.i18n.translate("brands.name")," is required ")}}var T=(()=>{class t{fb;ref;config;brandService;messageService;i18n;brandForm;isEditMode=!1;rentalModelOptions=[{label:"Fixed Monthly Rent",value:w.FixedMonthly},{label:"Percentage of Annual Sales",value:w.PercentageOfSales}];constructor(e,r,n,l,O,re){this.fb=e,this.ref=r,this.config=n,this.brandService=l,this.messageService=O,this.i18n=re}ngOnInit(){let e=this.config.data?.brand;this.isEditMode=!!e,this.brandForm=this.fb.group({name:[e?.name||"",D.required],description:[e?.description||"",D.required]})}onSubmit(){if(this.brandForm.valid){let e=this.brandForm.value;(this.isEditMode?this.brandService.updateBrand(this.config.data.brand.id,e):this.brandService.createBrand(e)).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:`Brand ${this.isEditMode?"updated":"created"} successfully`}),this.ref.close(n)},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.isEditMode?"update":"create"} brand`})}})}}static \u0275fac=function(r){return new(r||t)(c(J),c(W),c(U),c(E),c(I),c(y))};static \u0275cmp=C({type:t,selectors:[["app-brand-dialog"]],decls:17,vars:12,consts:[[1,"brand-dialog",3,"dir"],[1,"brand-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-field"],["pInputText","","formControlName","name",1,"w-full",3,"placeholder"],["class","p-error",4,"ngIf"],[1,"form-field","full-width"],["pInputTextarea","","formControlName","description",1,"w-full",3,"rows","placeholder"],[1,"form-actions"],["pButton","","type","button",1,"p-button-secondary",3,"click","label"],["pButton","","type","submit",3,"label","disabled"],[1,"p-error"]],template:function(r,n){if(r&1&&(o(0,"div",0)(1,"h3"),m(2),a(),o(3,"form",1),u("ngSubmit",function(){return n.onSubmit()}),o(4,"div",2)(5,"div",3)(6,"label"),m(7),a(),_(8,"input",4),g(9,pe,2,1,"small",5),a(),o(10,"div",6)(11,"label"),m(12),a(),_(13,"textarea",7),a()(),o(14,"div",8)(15,"button",9),u("click",function(){return n.ref.close()}),a(),_(16,"button",10),a()()()),r&2){let l;d("dir",n.i18n.getCurrentLanguage()==="ar"?"rtl":"ltr"),i(2),p(n.isEditMode?n.i18n.translate("brands.edit"):n.i18n.translate("brands.add")),i(),d("formGroup",n.brandForm),i(4),P("",n.i18n.translate("brands.name")," *"),i(),d("placeholder",n.i18n.translate("brands.name")),i(),d("ngIf",((l=n.brandForm.get("name"))==null?null:l.hasError("required"))&&((l=n.brandForm.get("name"))==null?null:l.touched)),i(3),p(n.i18n.translate("brands.description")),i(),d("rows",3)("placeholder",n.i18n.translate("brands.description")),i(2),x("label",n.i18n.translate("common.cancel")),i(),x("label",n.i18n.translate("common.save")),d("disabled",n.brandForm.invalid)}},dependencies:[S,Z,q,R,L,z,H,M,B,Y],styles:[".brand-dialog[_ngcontent-%COMP%]{padding:1.5rem;min-width:600px}.brand-dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.5rem;font-weight:600}.brand-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-field.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.w-full[_ngcontent-%COMP%]{width:100%}[dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{justify-content:flex-start}[dir=rtl][_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{text-align:right}@media (max-width: 768px){.brand-dialog[_ngcontent-%COMP%]{min-width:auto;width:100%}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return t})();var fe=()=>["name","branchLocation","contactPerson"];function ue(t,f){if(t&1){let e=h();o(0,"button",9),u("click",function(){b(e);let n=s();return v(n.openAddDialog())}),a()}if(t&2){let e=s();x("label",e.i18n.translate("brands.add"))}}function ge(t,f){if(t&1){let e=h();o(0,"div",10)(1,"span",11),_(2,"i",12),o(3,"input",13),u("input",function(n){b(e),s();let l=V(8);return v(l.filterGlobal(n.target.value,"contains"))}),a()()()}if(t&2){let e=s();i(3),d("placeholder",e.i18n.translate("common.search"))}}function _e(t,f){if(t&1&&(o(0,"th"),m(1),a()),t&2){let e=s(2);i(),p(e.i18n.translate("common.edit"))}}function be(t,f){if(t&1&&(o(0,"th"),m(1),a()),t&2){let e=s(2);i(),p(e.i18n.translate("common.delete"))}}function ve(t,f){if(t&1&&(o(0,"tr")(1,"th"),m(2),a(),o(3,"th"),m(4),a(),g(5,_e,2,1,"th",14)(6,be,2,1,"th",14),a()),t&2){let e=s();i(2),p(e.i18n.translate("brands.name")),i(2),p(e.i18n.translate("brands.description")),i(),d("ngIf",e.canEdit()),i(),d("ngIf",e.canDelete())}}function he(t,f){if(t&1){let e=h();o(0,"td")(1,"button",15),u("click",function(){b(e);let n=s().$implicit,l=s();return v(l.openEditDialog(n))}),a()()}}function xe(t,f){if(t&1){let e=h();o(0,"td")(1,"button",16),u("click",function(){b(e);let n=s().$implicit,l=s();return v(l.deleteBrand(n))}),a()()}}function Ce(t,f){if(t&1&&(o(0,"tr")(1,"td"),m(2),a(),o(3,"td"),m(4),a(),g(5,he,2,0,"td",14)(6,xe,2,0,"td",14),a()),t&2){let e=f.$implicit,r=s();i(2),p(e.name),i(2),p(e.description),i(),d("ngIf",r.canEdit()),i(),d("ngIf",r.canDelete())}}var ie=(()=>{class t{brandService;messageService;confirmationService;dialogService;i18n;brands=[];loading=!1;ref;constructor(e,r,n,l,O){this.brandService=e,this.messageService=r,this.confirmationService=n,this.dialogService=l,this.i18n=O}ngOnInit(){this.loadBrands()}loadBrands(){this.loading=!0,this.brandService.getAllBrands().subscribe({next:e=>{this.brands=e,this.loading=!1},error:()=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load brands"})}})}openAddDialog(){this.ref=this.dialogService.open(T,{header:this.i18n.translate("brands.add"),width:"70%",contentStyle:{"max-height":"90vh",overflow:"auto"},baseZIndex:1e4,data:{brand:null}}),this.ref.onClose.subscribe(e=>{e&&this.loadBrands()})}openEditDialog(e){this.ref=this.dialogService.open(T,{header:this.i18n.translate("brands.edit"),width:"70%",contentStyle:{"max-height":"90vh",overflow:"auto"},baseZIndex:1e4,data:{brand:e}}),this.ref.onClose.subscribe(r=>{r&&this.loadBrands()})}deleteBrand(e){this.confirmationService.confirm({message:`Are you sure you want to delete ${e.name}?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>{this.brandService.deleteBrand(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Brand deleted successfully"}),this.loadBrands()},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete brand"})}})}})}canEdit(){return!0}canDelete(){return!0}static \u0275fac=function(r){return new(r||t)(c(E),c(I),c($),c(X),c(y))};static \u0275cmp=C({type:t,selectors:[["app-brands"]],decls:12,vars:8,consts:[["dt",""],[1,"brands-container"],[1,"p-toolbar-group-start"],[1,"p-toolbar-group-end"],["pButton","","icon","pi pi-plus",3,"label","click",4,"ngIf"],["styleClass","p-datatable-striped",3,"value","paginator","rows","globalFilterFields","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pButton","","icon","pi pi-plus",3,"click","label"],[1,"table-header"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",3,"input","placeholder"],[4,"ngIf"],["pButton","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(r,n){r&1&&(o(0,"div",1)(1,"p-toolbar")(2,"div",2)(3,"h2"),m(4),a()(),o(5,"div",3),g(6,ue,1,1,"button",4),a()(),o(7,"p-table",5,0),g(9,ge,4,1,"ng-template",6)(10,ve,7,4,"ng-template",7)(11,Ce,7,4,"ng-template",8),a()()),r&2&&(i(4),p(n.i18n.translate("brands.title")),i(2),d("ngIf",n.canEdit()),i(),d("value",n.brands)("paginator",!0)("rows",10)("globalFilterFields",k(7,fe))("loading",n.loading))},dependencies:[S,M,G,B,Q,ee],styles:[".brands-container[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .brands-container[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .brands-container[_ngcontent-%COMP%]{padding:2rem}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[dir=rtl][_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{flex-direction:row-reverse}"]})}return t})();var $e=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=j({type:t});static \u0275inj=F({imports:[N,K,te,A.forChild([{path:"",component:ie}])]})}return t})();export{$e as BrandsModule};
