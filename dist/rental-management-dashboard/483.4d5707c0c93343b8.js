"use strict";(self.webpackChunkrental_management_dashboard=self.webpackChunkrental_management_dashboard||[]).push([[483],{3483:(D,g,i)=>{i.r(g),i.d(g,{BrandsModule:()=>T});var c=i(177),s=i(9417),C=i(4008),B=i(7436),m=function(e){return e.FixedMonthly="FixedMonthly",e.PercentageOfSales="PercentageOfSales",e}(m||{}),t=i(4438),p=i(2100),f=i(2953),d=i(5779),b=i(3422),h=i(1141),_=i(2242),F=i(1305);function S(e,l){if(1&e&&(t.j41(0,"small",11),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.SpI(" ",n.i18n.translate("brands.name")," is required ")}}let v=(()=>{class e{fb;ref;config;brandService;messageService;i18n;brandForm;isEditMode=!1;rentalModelOptions=[{label:"Fixed Monthly Rent",value:m.FixedMonthly},{label:"Percentage of Annual Sales",value:m.PercentageOfSales}];constructor(n,a,r,o,u,X){this.fb=n,this.ref=a,this.config=r,this.brandService=o,this.messageService=u,this.i18n=X}ngOnInit(){const n=this.config.data?.brand;this.isEditMode=!!n,this.brandForm=this.fb.group({name:[n?.name||"",s.k0.required],description:[n?.description||"",s.k0.required]})}onSubmit(){if(this.brandForm.valid){const n=this.brandForm.value;(this.isEditMode?this.brandService.updateBrand(this.config.data.brand.id,n):this.brandService.createBrand(n)).subscribe({next:r=>{this.messageService.add({severity:"success",summary:"Success",detail:`Brand ${this.isEditMode?"updated":"created"} successfully`}),this.ref.close(r)},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:`Failed to ${this.isEditMode?"update":"create"} brand`})}})}}static \u0275fac=function(a){return new(a||e)(t.rXU(s.ok),t.rXU(p.Pw),t.rXU(p.sb),t.rXU(f.j),t.rXU(d.bg),t.rXU(b.W))};static \u0275cmp=t.VBU({type:e,selectors:[["app-brand-dialog"]],decls:17,vars:12,consts:[[1,"brand-dialog",3,"dir"],[1,"brand-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-field"],["pInputText","","formControlName","name",1,"w-full",3,"placeholder"],["class","p-error",4,"ngIf"],[1,"form-field","full-width"],["pInputTextarea","","formControlName","description",1,"w-full",3,"rows","placeholder"],[1,"form-actions"],["pButton","","type","button",1,"p-button-secondary",3,"click","label"],["pButton","","type","submit",3,"label","disabled"],[1,"p-error"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"form",1),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(4,"div",2)(5,"div",3)(6,"label"),t.EFF(7),t.k0s(),t.nrm(8,"input",4),t.DNE(9,S,2,1,"small",5),t.k0s(),t.j41(10,"div",6)(11,"label"),t.EFF(12),t.k0s(),t.nrm(13,"textarea",7),t.k0s()(),t.j41(14,"div",8)(15,"button",9),t.bIt("click",function(){return r.ref.close()}),t.k0s(),t.nrm(16,"button",10),t.k0s()()()),2&a){let o;t.Y8G("dir","ar"===r.i18n.getCurrentLanguage()?"rtl":"ltr"),t.R7$(2),t.JRh(r.i18n.translate(r.isEditMode?"brands.edit":"brands.add")),t.R7$(),t.Y8G("formGroup",r.brandForm),t.R7$(4),t.SpI("",r.i18n.translate("brands.name")," *"),t.R7$(),t.Y8G("placeholder",r.i18n.translate("brands.name")),t.R7$(),t.Y8G("ngIf",(null==(o=r.brandForm.get("name"))?null:o.hasError("required"))&&(null==(o=r.brandForm.get("name"))?null:o.touched)),t.R7$(3),t.JRh(r.i18n.translate("brands.description")),t.R7$(),t.Y8G("rows",3)("placeholder",r.i18n.translate("brands.description")),t.R7$(2),t.FS9("label",r.i18n.translate("common.cancel")),t.R7$(),t.FS9("label",r.i18n.translate("common.save")),t.Y8G("disabled",r.brandForm.invalid)}},dependencies:[c.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,h._f,_.S,F.Z],styles:[".brand-dialog[_ngcontent-%COMP%]{padding:1.5rem;min-width:600px}.brand-dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.5rem;font-weight:600}.brand-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-field.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.w-full[_ngcontent-%COMP%]{width:100%}[dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{justify-content:flex-start}[dir=rtl][_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{text-align:right}@media (max-width: 768px){.brand-dialog[_ngcontent-%COMP%]{min-width:auto;width:100%}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return e})();var y=i(9245),M=i(1830);const R=()=>["name","branchLocation","contactPerson"];function j(e,l){if(1&e){const n=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.openAddDialog())}),t.k0s()}if(2&e){const n=t.XpG();t.FS9("label",n.i18n.translate("brands.add"))}}function x(e,l){if(1&e){const n=t.RV6();t.j41(0,"div",10)(1,"span",11),t.nrm(2,"i",12),t.j41(3,"input",13),t.bIt("input",function(r){t.eBV(n),t.XpG();const o=t.sdS(8);return t.Njj(o.filterGlobal(r.target.value,"contains"))}),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(3),t.Y8G("placeholder",n.i18n.translate("common.search"))}}function E(e,l){if(1&e&&(t.j41(0,"th"),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.JRh(n.i18n.translate("common.edit"))}}function G(e,l){if(1&e&&(t.j41(0,"th"),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.JRh(n.i18n.translate("common.delete"))}}function O(e,l){if(1&e&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"th"),t.EFF(4),t.k0s(),t.DNE(5,E,2,1,"th",14)(6,G,2,1,"th",14),t.k0s()),2&e){const n=t.XpG();t.R7$(2),t.JRh(n.i18n.translate("brands.name")),t.R7$(2),t.JRh(n.i18n.translate("brands.description")),t.R7$(),t.Y8G("ngIf",n.canEdit()),t.R7$(),t.Y8G("ngIf",n.canDelete())}}function P(e,l){if(1&e){const n=t.RV6();t.j41(0,"td")(1,"button",15),t.bIt("click",function(){t.eBV(n);const r=t.XpG().$implicit,o=t.XpG();return t.Njj(o.openEditDialog(r))}),t.k0s()()}}function $(e,l){if(1&e){const n=t.RV6();t.j41(0,"td")(1,"button",16),t.bIt("click",function(){t.eBV(n);const r=t.XpG().$implicit,o=t.XpG();return t.Njj(o.deleteBrand(r))}),t.k0s()()}}function k(e,l){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.DNE(5,P,2,0,"td",14)(6,$,2,0,"td",14),t.k0s()),2&e){const n=l.$implicit,a=t.XpG();t.R7$(2),t.JRh(n.name),t.R7$(2),t.JRh(n.description),t.R7$(),t.Y8G("ngIf",a.canEdit()),t.R7$(),t.Y8G("ngIf",a.canDelete())}}let I=(()=>{class e{brandService;messageService;confirmationService;dialogService;i18n;brands=[];loading=!1;ref;constructor(n,a,r,o,u){this.brandService=n,this.messageService=a,this.confirmationService=r,this.dialogService=o,this.i18n=u}ngOnInit(){this.loadBrands()}loadBrands(){this.loading=!0,this.brandService.getAllBrands().subscribe({next:n=>{this.brands=n,this.loading=!1},error:()=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load brands"})}})}openAddDialog(){this.ref=this.dialogService.open(v,{header:this.i18n.translate("brands.add"),width:"70%",contentStyle:{"max-height":"90vh",overflow:"auto"},baseZIndex:1e4,data:{brand:null}}),this.ref.onClose.subscribe(n=>{n&&this.loadBrands()})}openEditDialog(n){this.ref=this.dialogService.open(v,{header:this.i18n.translate("brands.edit"),width:"70%",contentStyle:{"max-height":"90vh",overflow:"auto"},baseZIndex:1e4,data:{brand:n}}),this.ref.onClose.subscribe(a=>{a&&this.loadBrands()})}deleteBrand(n){this.confirmationService.confirm({message:`Are you sure you want to delete ${n.name}?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>{this.brandService.deleteBrand(n.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Brand deleted successfully"}),this.loadBrands()},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete brand"})}})}})}canEdit(){return!0}canDelete(){return!0}static \u0275fac=function(a){return new(a||e)(t.rXU(f.j),t.rXU(d.bg),t.rXU(d.td),t.rXU(p.o3),t.rXU(b.W))};static \u0275cmp=t.VBU({type:e,selectors:[["app-brands"]],decls:12,vars:8,consts:[["dt",""],[1,"brands-container"],[1,"p-toolbar-group-start"],[1,"p-toolbar-group-end"],["pButton","","icon","pi pi-plus",3,"label","click",4,"ngIf"],["styleClass","p-datatable-striped",3,"value","paginator","rows","globalFilterFields","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pButton","","icon","pi pi-plus",3,"click","label"],[1,"table-header"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",3,"input","placeholder"],[4,"ngIf"],["pButton","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(a,r){1&a&&(t.j41(0,"div",1)(1,"p-toolbar")(2,"div",2)(3,"h2"),t.EFF(4),t.k0s()(),t.j41(5,"div",3),t.DNE(6,j,1,1,"button",4),t.k0s()(),t.j41(7,"p-table",5,0),t.DNE(9,x,4,1,"ng-template",6)(10,O,7,4,"ng-template",7)(11,k,7,4,"ng-template",8),t.k0s()()),2&a&&(t.R7$(4),t.JRh(r.i18n.translate("brands.title")),t.R7$(2),t.Y8G("ngIf",r.canEdit()),t.R7$(),t.Y8G("value",r.brands)("paginator",!0)("rows",10)("globalFilterFields",t.lJ4(7,R))("loading",r.loading))},dependencies:[c.bT,h._f,d.Ei,_.S,y.XI,M.M],styles:[".brands-container[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .brands-container[_ngcontent-%COMP%], [dir=ltr][_ngcontent-%COMP%]   .brands-container[_ngcontent-%COMP%]{padding:2rem}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[dir=rtl][_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{flex-direction:row-reverse}"]})}return e})(),T=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[c.MD,s.X1,B.G,C.iI.forChild([{path:"",component:I}])]})}return e})()}}]);